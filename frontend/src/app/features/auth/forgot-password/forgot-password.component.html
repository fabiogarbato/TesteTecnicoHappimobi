<section class="auth-card">
  <header class="auth-card__header">
    <h1>Recuperar acesso</h1>
    <p>Informe o e-mail cadastrado para gerar um token de redefinição de senha.</p>
  </header>

  <form [formGroup]="form" (ngSubmit)="onSubmit()" novalidate>
    <div class="form-field" [class.form-field--invalid]="emailInvalid">
      <label for="email">E-mail</label>
      <input
        id="email"
        type="email"
        placeholder="usuario@teste.com"
        formControlName="email"
        autocomplete="email"
      />
      <small *ngIf="emailInvalid">
        Informe um e-mail válido.
      </small>
    </div>

    <p class="auth-card__error" *ngIf="errorMessage()">
      {{ errorMessage() }}
    </p>

    <p class="auth-card__success" *ngIf="successMessage()">
      {{ successMessage() }}
    </p>

    <div class="auth-card__token" *ngIf="resetToken() as token">
      <p>Token gerado (use apenas em ambiente de testes):</p>
      <code>{{ token }}</code>
    </div>

    <button type="submit" [disabled]="submitting()">
      <span *ngIf="!submitting(); else loading">Gerar token</span>
    </button>

    <ng-template #loading>
      <span>Gerando token...</span>
    </ng-template>
  </form>

  <footer class="auth-card__footer">
    <button type="button" class="link" (click)="goToLogin()">Voltar ao login</button>
    <button type="button" class="link" (click)="goToReset()">Já tenho um token</button>
  </footer>
</section>
