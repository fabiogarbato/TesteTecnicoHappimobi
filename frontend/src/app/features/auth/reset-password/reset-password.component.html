<section class="auth-card">
  <header class="auth-card__header">
    <h1>Redefinir senha</h1>
    <p>Informe o token recebido e escolha uma nova senha de acesso.</p>
  </header>

  <form [formGroup]="form" (ngSubmit)="onSubmit()" novalidate>
    <div class="form-field" [class.form-field--invalid]="tokenInvalid">
      <label for="token">Token</label>
      <input
        id="token"
        type="text"
        placeholder="Cole o token recebido"
        formControlName="token"
        autocomplete="one-time-code"
      />
      <small *ngIf="tokenInvalid">Informe um token v√°lido.</small>
    </div>

    <div class="form-field" [class.form-field--invalid]="passwordInvalid">
      <label for="password">Nova senha</label>
      <input
        id="password"
        type="password"
        placeholder="Nova senha"
        formControlName="password"
        autocomplete="new-password"
      />
      <small *ngIf="passwordInvalid">A senha deve ter pelo menos 6 caracteres.</small>
    </div>

    <div class="form-field" [class.form-field--invalid]="confirmPasswordInvalid || form.hasError('mismatch')">
      <label for="confirmPassword">Confirmar senha</label>
      <input
        id="confirmPassword"
        type="password"
        placeholder="Repita a nova senha"
        formControlName="confirmPassword"
        autocomplete="new-password"
      />
      <small *ngIf="confirmPasswordInvalid || form.hasError('mismatch')">
        As senhas precisam ser iguais.
      </small>
    </div>

    <p class="auth-card__error" *ngIf="errorMessage()">
      {{ errorMessage() }}
    </p>

    <button type="submit" [disabled]="submitting()">
      <span *ngIf="!submitting(); else loading">Redefinir senha</span>
    </button>

    <ng-template #loading>
      <span>Atualizando senha...</span>
    </ng-template>
  </form>

  <footer class="auth-card__footer">
    <button type="button" class="link" (click)="goToLogin()">Voltar ao login</button>
    <button type="button" class="link" (click)="goToForgot()">Gerar novo token</button>
  </footer>
</section>
